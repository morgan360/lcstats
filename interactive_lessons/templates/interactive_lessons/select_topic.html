{% extends "_base.html" %}
{% block title %}Choose a Topic{% endblock %}
{% block content %}

<h2 style="margin-bottom: 30px;">Choose a Topic</h2>

<style>
    .topics-table {
        width: 100%;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .topics-table-header {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
        gap: 15px;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: 600;
        font-size: 0.95em;
    }

    .topics-table-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
        gap: 15px;
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        align-items: center;
        transition: background-color 0.2s;
    }

    .topics-table-row:hover {
        background-color: #f8f9fa;
    }

    .topics-table-row:last-child {
        border-bottom: none;
    }

    .topic-name {
        font-size: 1.1em;
        font-weight: 600;
        color: #2c3e50;
    }

    .resource-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 10px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9em;
        transition: all 0.2s;
        text-align: center;
        width: 100%;
        max-width: 200px;
    }

    .resource-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn-quiz {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-quickkicks {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
    }

    .btn-resources {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
    }

    .btn-exam {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        color: white;
    }

    .btn-disabled {
        background: #e0e0e0;
        color: #9e9e9e;
        cursor: not-allowed;
        pointer-events: none;
    }

    .resource-icon {
        width: 18px;
        height: 18px;
        margin-right: 8px;
        vertical-align: middle;
    }

    .count-badge {
        display: inline-block;
        background: rgba(255,255,255,0.3);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.85em;
        margin-left: 5px;
    }

    @media (max-width: 768px) {
        .topics-table-header,
        .topics-table-row {
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .topics-table-header {
            display: none;
        }

        .topic-name {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .resource-btn {
            max-width: 100%;
        }
    }
</style>

<div class="topics-table">
    <div class="topics-table-header">
        <div>Topic</div>
        <div style="text-align: center;">Interactive Quiz</div>
        <div style="text-align: center;">Exam Questions</div>
        <div style="text-align: center;">QuickKicks</div>
        <div style="text-align: center;">Cheat Sheets</div>
    </div>

    {% for item in topics_with_notes %}
    <div class="topics-table-row">
        <div class="topic-name">
            {{ item.topic.name }}
        </div>

        <div style="display: flex; justify-content: center;">
            <a href="{% url 'section_list' item.topic.slug %}" class="resource-btn btn-quiz">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                </svg>
                Quiz
                <span class="count-badge">{{ item.question_count }}</span>
            </a>
        </div>

        <div style="display: flex; justify-content: center;">
            {% if item.has_exam_questions %}
            <a href="{% url 'topic_exam_questions' item.topic.slug %}" class="resource-btn btn-exam">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                Exam Questions
                <span class="count-badge">{{ item.exam_question_count }}</span>
            </a>
            {% else %}
            <span class="resource-btn btn-disabled">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
                Not Available
            </span>
            {% endif %}
        </div>

        <div style="display: flex; justify-content: center;">
            {% if item.has_quickkicks %}
            <a href="{% url 'quickkicks:quickkicks_list' item.topic.slug %}" class="resource-btn btn-quickkicks">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/>
                </svg>
                View
                <span class="count-badge">{{ item.quickkick_count }}</span>
            </a>
            {% else %}
            <span class="resource-btn btn-disabled">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/>
                </svg>
                Not Available
            </span>
            {% endif %}
        </div>

        <div style="display: flex; justify-content: center;">
            {% if item.has_cheatsheets %}
            <a href="{% url 'cheatsheets:cheatsheets_topic' item.topic.slug %}" class="resource-btn btn-resources">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10,19L12,15H9V10H15V15L13,19H10Z"/>
                </svg>
                View
                <span class="count-badge">{{ item.cheatsheet_count }}</span>
            </a>
            {% else %}
            <span class="resource-btn btn-disabled">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10,19L12,15H9V10H15V15L13,19H10Z"/>
                </svg>
                Not Available
            </span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
