{% extends "_base.html" %}
{% block title %}Choose a Topic{% endblock %}
{% block content %}

<h2 style="margin-bottom: 30px;">Choose a Topic</h2>

<style>
    .topics-table {
        width: 100%;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .topics-table-header {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 15px;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: 600;
        font-size: 0.95em;
    }

    .topics-table-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 15px;
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        align-items: center;
        transition: background-color 0.2s;
    }

    .topics-table-row:hover {
        background-color: #f8f9fa;
    }

    .topics-table-row:last-child {
        border-bottom: none;
    }

    .topic-name {
        font-size: 1.1em;
        font-weight: 600;
        color: #2c3e50;
    }

    .resource-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 10px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9em;
        transition: all 0.2s;
        text-align: center;
        width: 100%;
        max-width: 200px;
    }

    .resource-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn-quiz {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-revision {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
    }

    .btn-resources {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
    }

    .btn-disabled {
        background: #e0e0e0;
        color: #9e9e9e;
        cursor: not-allowed;
        pointer-events: none;
    }

    .resource-icon {
        width: 18px;
        height: 18px;
        margin-right: 8px;
        vertical-align: middle;
    }

    .count-badge {
        display: inline-block;
        background: rgba(255,255,255,0.3);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.85em;
        margin-left: 5px;
    }

    @media (max-width: 768px) {
        .topics-table-header,
        .topics-table-row {
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .topics-table-header {
            display: none;
        }

        .topic-name {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .resource-btn {
            max-width: 100%;
        }
    }
</style>

<div class="topics-table">
    <div class="topics-table-header">
        <div>Topic</div>
        <div style="text-align: center;">Interactive Quiz</div>
        <div style="text-align: center;">Revision Notes</div>
        <div style="text-align: center;">Study Resources</div>
    </div>

    {% for item in topics_with_notes %}
    <div class="topics-table-row">
        <div class="topic-name">
            {{ item.topic.name }}
        </div>

        <div style="display: flex; justify-content: center;">
            <a href="{% url 'question_view' item.topic.id 1 %}" class="resource-btn btn-quiz">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                </svg>
                Quiz
                <span class="count-badge">{{ item.question_count }}</span>
            </a>
        </div>

        <div style="display: flex; justify-content: center;">
            {% if item.has_revision %}
            <a href="{% url 'module_detail' item.topic.slug %}" class="resource-btn btn-revision">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19,1L14,6V17L19,12.5V1M21,5V18.5C19.9,18.15 18.7,18 17.5,18C15.8,18 13.35,18.65 12,19.5V6C10.55,4.9 8.45,4.5 6.5,4.5C4.55,4.5 2.45,4.9 1,6V20.65C1,20.9 1.25,21.15 1.5,21.15C1.6,21.15 1.65,21.1 1.75,21.1C3.1,20.45 5.05,20 6.5,20C8.45,20 10.55,20.4 12,21.5C13.35,20.65 15.8,20 17.5,20C19.15,20 20.85,20.3 22.25,21.05C22.35,21.1 22.4,21.1 22.5,21.1C22.75,21.1 23,20.85 23,20.6V6C22.4,5.55 21.75,5.25 21,5M10,18.41C8.75,18.09 7.5,18 6.5,18C5.44,18 4.18,18.19 3,18.5V7.13C3.91,6.73 5.14,6.5 6.5,6.5C7.86,6.5 9.09,6.73 10,7.13V18.41Z"/>
                </svg>
                View Revision
            </a>
            {% else %}
            <span class="resource-btn btn-disabled">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19,1L14,6V17L19,12.5V1M21,5V18.5C19.9,18.15 18.7,18 17.5,18C15.8,18 13.35,18.65 12,19.5V6C10.55,4.9 8.45,4.5 6.5,4.5C4.55,4.5 2.45,4.9 1,6V20.65C1,20.9 1.25,21.15 1.5,21.15C1.6,21.15 1.65,21.1 1.75,21.1C3.1,20.45 5.05,20 6.5,20C8.45,20 10.55,20.4 12,21.5C13.35,20.65 15.8,20 17.5,20C19.15,20 20.85,20.3 22.25,21.05C22.35,21.1 22.4,21.1 22.5,21.1C22.75,21.1 23,20.85 23,20.6V6C22.4,5.55 21.75,5.25 21,5M10,18.41C8.75,18.09 7.5,18 6.5,18C5.44,18 4.18,18.19 3,18.5V7.13C3.91,6.73 5.14,6.5 6.5,6.5C7.86,6.5 9.09,6.73 10,7.13V18.41Z"/>
                </svg>
                Not Available
            </span>
            {% endif %}
        </div>

        <div style="display: flex; justify-content: center;">
            {% if item.has_notes %}
            <a href="{% url 'notes_topic' item.topic.slug %}" class="resource-btn btn-resources">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10,19L12,15H9V10H15V15L13,19H10Z"/>
                </svg>
                Resources
                <span class="count-badge">{{ item.note_count }}</span>
            </a>
            {% else %}
            <span class="resource-btn btn-disabled">
                <svg class="resource-icon" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M10,19L12,15H9V10H15V15L13,19H10Z"/>
                </svg>
                Not Available
            </span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
