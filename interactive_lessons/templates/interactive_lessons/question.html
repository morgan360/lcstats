{% extends "_base.html" %}
{% block title %}{{ topic.name }} â€“ Question {{ index }}{% endblock %}
{% block content %}

<h2>{{ topic.name }}</h2>
<p><strong>Question {{ index }} of {{ total }}</strong></p>

<div style="margin:20px 0; line-height:1.6;">
    {{ question.text|safe }}
</div>

<form method="post" style="margin-top:20px;">
    {% csrf_token %}
    <textarea name="student_answer" rows="4" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;"></textarea>

    <div style="margin-top:10px;">
        <button type="submit" name="submit" class="btn">Submit</button>

        {% if index > 1 %}
            <a href="{% url 'question_view' topic.id index|add:'-1' %}" class="btn">â¬… Previous</a>
        {% endif %}

        {% if index < total %}
            <a href="{% url 'question_view' topic.id index|add:'1' %}" class="btn">Skip âž¡</a>
        {% else %}
            <a href="{% url 'topic_complete' topic.name %}" class="btn">Finish</a>
        {% endif %}
    </div>
</form>

<hr style="margin:30px 0;">

<!-- Question number list -->
<div style="text-align:center;">
    {% for q in questions %}
        {% if forloop.counter == index %}
            <span style="font-weight:bold;color:#004aad;">{{ forloop.counter }}</span>
        {% else %}
            <a href="{% url 'question_view' topic.id forloop.counter %}">{{ forloop.counter }}</a>
        {% endif %}
        {% if not forloop.last %} | {% endif %}
    {% endfor %}
</div>

{% endblock %}

{% block log_tables_button %}
<!-- Floating Log Tables Button -->
<a href="{% url 'cheatsheets:log_tables' %}" target="_blank"
   class="fixed bottom-6 right-6 z-50 flex items-center gap-2 rounded-full bg-gradient-to-r from-lime-500 to-green-600 px-4 py-3 text-sm font-semibold text-white shadow-lg transition hover:shadow-xl hover:scale-105"
   title="Open Log Tables">
    <span class="text-lg">ðŸ“Š</span>
    <span class="hidden sm:inline">Log Tables</span>
</a>
{% endblock %}
