{% extends '_base.html' %}

{% block title %}QuickFlicks - {{ topic.name }} | NumScoil{% endblock %}

{% block content %}
<div class="mx-auto max-w-6xl px-4 py-8 sm:px-6 lg:px-8">
  <!-- Back Button -->
  <div class="mt-8">
    <a href="{% url 'select_topic' %}"
      class="inline-flex items-center gap-2 rounded-lg bg-gradient-06 px-5 py-3 mb-5 text-sm font-semibold text-mist shadow-[0_12px_26px_rgba(148,72,176,0.28)] transition hover:-translate-y-0.5 hover:shadow-[0_16px_32px_rgba(148,72,176,0.34)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-violet-royal">
      ‚Üê Back to Interactive Lessons
    </a>
  </div>
  <!-- Header -->
  <div
    class="mb-8 rounded-2xl bg-gradient-to-r from-rose-pop to-violet-royal p-6 text-mist shadow-[0_14px_36px_rgba(148,72,176,0.28)]">
    <div class="mb-2 flex flex-wrap items-center gap-3">
      <span
        class="inline-flex items-center rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-mist">
        {{ topic.name }}
      </span>
    </div>
    <h1 class="mb-2 text-3xl font-semibold">QuickFlicks</h1>
    <p class="text-mist/90">Short animation videos and interactive GeoGebra applets to help you visualize and understand
      key concepts.</p>
  </div>

  <!-- Videos List -->
  {% if quickkicks %}
  <div class="grid gap-5 grid-cols-2">
    {% for quickkick in quickkicks %}
    <div
      class="group flex h-full flex-col rounded-2xl border border-indigo-deep/10 bg-white/95 p-5 shadow-[0_12px_28px_rgba(0,0,0,0.08)] transition hover:-translate-y-1 hover:shadow-[0_16px_36px_rgba(148,72,176,0.2)]">
      <div class="mb-2 flex flex-wrap items-center gap-2">
        {% if quickkick.content_type == 'video' %}
        <span
          class="inline-flex items-center rounded-full bg-violet-royal px-3 py-1 text-xs font-semibold text-mist shadow-[0_6px_18px_rgba(148,72,176,0.25)]">
          ‚ñ∂ Video
        </span>
        {% else %}
        <span
          class="inline-flex items-center rounded-full bg-lime-glow px-3 py-1 text-xs font-semibold text-midnight shadow-[0_6px_18px_rgba(0,0,0,0.12)]">
          üìê GeoGebra
        </span>
        {% endif %}
        {% if quickkick.content_type == 'video' and quickkick.duration_seconds %}
        <span
          class="inline-flex items-center rounded-full bg-midnight/5 px-3 py-1 text-xs font-semibold text-indigo-deep/80 border border-indigo-deep/10">
          ‚è± {{ quickkick.duration_seconds }}s
        </span>
        {% endif %}
      </div>
      <h3 class="mb-2 text-xl font-semibold text-midnight">{{ quickkick.title }}</h3>
      {% if quickkick.description %}
      <p class="mb-4 text-sm leading-relaxed text-indigo-deep/80">{{ quickkick.description|truncatewords:22 }}</p>
      {% endif %}
      <div class="mt-auto flex flex-wrap gap-2">
        <a href="{% url 'quickkicks:quickkick_view' topic.slug quickkick.id %}"
          class="inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-rose-pop to-violet-royal px-4 py-2 text-sm font-semibold text-mist shadow-[0_12px_24px_rgba(148,72,176,0.28)] transition hover:-translate-y-0.5 hover:shadow-[0_16px_30px_rgba(148,72,176,0.34)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-violet-royal">
          {% if quickkick.content_type == 'video' %}‚ñ∂ Watch{% else %}Open GeoGebra{% endif %}
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <!-- No Videos Message -->
  <div
    class="rounded-2xl border border-indigo-deep/20 bg-mist px-6 py-12 text-center shadow-[0_12px_28px_rgba(0,0,0,0.08)]">
    <p class="text-lg font-semibold text-midnight">No QuickFlicks available yet.</p>
    <p class="text-indigo-deep/70">Check back soon!</p>
  </div>
  {% endif %}
</div>
{% endblock %}