{% extends "_base.html" %}
{% load account %}

{% block title %}Login | LCAI Maths{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: 60px auto; padding: 20px;">
    <div style="background: white; border-radius: 12px; padding: 40px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #004aad; font-size: 2em; margin-bottom: 10px;">Welcome Back</h1>
            <p style="color: #666; font-size: 1.1em;">Login to continue your learning journey</p>
        </div>

        {% if messages %}
            {% for message in messages %}
                <div style="background-color: {% if message.tags == 'error' or message.tags == 'danger' %}#ffebee{% else %}#e8f5e9{% endif %};
                            border: 1px solid {% if message.tags == 'error' or message.tags == 'danger' %}#ef5350{% else %}#66bb6a{% endif %};
                            padding: 12px;
                            border-radius: 6px;
                            margin-bottom: 20px;
                            text-align: center;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <form method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div style="background-color: #ffebee; border: 1px solid #ef5350; padding: 12px; border-radius: 6px; margin-bottom: 20px;">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <div style="margin-bottom: 20px;">
                <label for="{{ form.login.id_for_label }}" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">
                    Username or Email
                </label>
                <input type="text"
                       name="{{ form.login.name }}"
                       id="{{ form.login.id_for_label }}"
                       placeholder="Enter your username or email"
                       required
                       value="{{ form.login.value|default:'' }}"
                       style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 1em; box-sizing: border-box; transition: border-color 0.3s;">
                {% if form.login.errors %}
                    <div style="color: #ef5350; font-size: 0.9em; margin-top: 5px;">
                        {{ form.login.errors }}
                    </div>
                {% endif %}
            </div>

            <div style="margin-bottom: 20px;">
                <label for="{{ form.password.id_for_label }}" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">
                    Password
                </label>
                <input type="password"
                       name="{{ form.password.name }}"
                       id="{{ form.password.id_for_label }}"
                       placeholder="Enter your password"
                       required
                       style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 1em; box-sizing: border-box; transition: border-color 0.3s;">
                {% if form.password.errors %}
                    <div style="color: #ef5350; font-size: 0.9em; margin-top: 5px;">
                        {{ form.password.errors }}
                    </div>
                {% endif %}
            </div>

            <div style="margin-bottom: 25px;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" name="{{ form.remember.name }}" id="{{ form.remember.id_for_label }}" style="margin-right: 8px; width: 18px; height: 18px; cursor: pointer;">
                    <span style="color: #666;">Remember me</span>
                </label>
            </div>

            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
            {% endif %}

            <button type="submit"
                    style="width: 100%; background: linear-gradient(135deg, #004aad 0%, #0066cc 100%); color: white; padding: 14px; font-size: 1.1em; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: transform 0.2s;">
                Login
            </button>
        </form>

        <div style="text-align: center; margin-top: 25px; padding-top: 25px; border-top: 2px solid #f0f0f0;">
            <p style="margin: 0 0 15px 0; color: #666;">
                <a href="{% url 'account_reset_password' %}" style="color: #004aad; text-decoration: none; font-weight: 600;">
                    Forgot your password?
                </a>
            </p>
            <p style="margin: 0; color: #666;">
                Don't have an account?
                <a href="{% url 'account_signup' %}" style="color: #00994c; font-weight: 600; text-decoration: none;">
                    Sign up here
                </a>
            </p>
        </div>
    </div>
</div>

<style>
    input[type="text"]:focus,
    input[type="password"]:focus {
        outline: none;
        border-color: #004aad;
    }

    button[type="submit"]:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 74, 173, 0.3);
    }
</style>
{% endblock %}