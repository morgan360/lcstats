{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}LCAI Maths{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <!-- ‚úÖ MathLive styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mathlive@0.107.1/mathlive-static.min.css">

    <!-- ‚úÖ KaTeX styles -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
</head>

<body>
<nav>
    <a href="/" class="logo"><strong>LCAI Maths</strong></a>
    <div class="nav-links">
        <a href="{% url 'select_topic' %}">Interactive Lessons</a>
        <a href="{% url 'notes_topic' 'Statistics Summary' %}">Summary Notes</a>
        <a href="/about/">About</a>
        <a href="/contact/">Contact</a>

        {% if request.user.is_staff %}
            <a href="/admin/" style="color:#ffea00;font-weight:bold;">Admin</a>
        {% endif %}

        {% if user.is_authenticated %}
            <span class="username" style="margin-right:10px;">üëã {{ user.username }}</span>
            <a href="{% url 'dashboard' %}">Dashboard</a>
            <a href="{% url 'logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
            <a href="{% url 'signup' %}">Sign Up</a>
        {% endif %}
    </div>
</nav>

<main>
    {% block content %}{% endblock %}
</main>

<footer>
    &copy; 2025/26 LCAI Maths. All rights reserved.
</footer>

<!-- ‚úÖ KaTeX scripts -->
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

<script>
    // Run KaTeX after everything is loaded
    window.addEventListener("load", function () {
        if (window.renderMathInElement) {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\(", right: "\\)", display: false},
                    {left: "$", right: "$", display: false}
                ],
                throwOnError: false
            });
        } else {
            console.error("‚ùå KaTeX failed to load");
        }
    });
</script>

<!-- ‚úÖ MathLive script -->
<script src="https://cdn.jsdelivr.net/npm/mathlive@0.107.1/mathlive.min.js"></script>

<!-- Per-page scripts (e.g. for math input capture) -->
{% block extra_scripts %}{% endblock %}

</body>
</html>
